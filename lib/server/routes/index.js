'use strict'

const fs = require( 'fs' )
const path = require( 'path' )
const express = require( 'express' )
const router = express.Router()
const storage = require( 'node-persist' )

const ansi = require( '../../util/ansi' )

const mafsdk = fs.readFileSync( path.resolve( process.cwd(), `./node_modules/maf3-sdk/lib/maf-sdk.js` ) )

function setIndex( maf, meta, storeConfig ) {
  router.get( `/`, ( req, res ) => {
    if ( maf.autostart && !req.query.autostart )
      res.redirect( `${req.protocol}://${req.headers.host}${req.path}?autostart=1#app:${meta.identifier}` )
    else
      res.end( `<html>
  <head>
    <title>MAFðŸ¥‰SDK</title>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiBAMAAADIaRbxAAAAMFBMVEX///9ZWFexsLDNzc3z8/OBgIBBQD82NTQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABU0T28AAAAAXRSTlMAQObYZgAAAMxJREFUeNpjYKAxUHRgcFSAMJkg1DcVFrUPKCJavLpcBii6WMTLRRhQ1PzR+qWDZjRLCIzFCCKchP8cYGBw+fvuAEgOpFNVgEENJPMaJmIiMIvFgYFhD1u8wQWIiOKb9wyrgTTzR4ULELsOvIWY+ffDAajtAReg1lwIQLgHCgSgIgICSAJoavCIQMMBQjMhCSBY4gFQRjjMCnERWCAJQP0l4PXwgiDDe2YdtZUfICL32FRVgWbwM/57APIdEP97dUKRg4H9w+K3LxjoCwBNejDuc5UqcAAAAABJRU5ErkJggg==" rel="icon" type="image/x-icon" />
    <script>
      var MAE = ${JSON.stringify( storeConfig, null, 2 )}
    </script>
    <script src="maf.js"></script>
  </head>
  <body style="overflow:hidden;"></body>
</html>` )
  } )
}

function favicon() {
  router.get( `/favicon.ico`, ( req, res ) =>
    res.end(
      Buffer.from(
        `AAABAAMAMDAAAAEAIACoJQAANgAAACAgAAABACAAqBAAAN4lAAAQEAAAAQAgAGgEAACGNgAAKAAAADAAAABgAAAAAQAgAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAPAAAAHkAAACeAAAApgAAAKYAAACmAAAApgAAAKYAAACmAAAApgAAAKYAAACmAAAApgAAAKYAAACmAAAApgAAAKYAAACmAAAApgAAAKYAAACmAAAApgAAAKYAAACmAAAApgAAAKYAAACmAAAApgAAAKYAAACeAAAAeQAAAEUAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAACvAAAA7gAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAO4AAACvAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVAAAAOMAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA4wAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAA4wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAOMAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAACvAAAA/wAAAP8AAAD/AAAA/wAAAPoAAADjAAAA1QAAANUAAADVAAAA1QAAANUAAADVAAAA1QAAANUAAADVAAAA1QAAANUAAADVAAAA1QAAANUAAADVAAAA1QAAANUAAADVAAAA1QAAANUAAADVAAAA1QAAANUAAADVAAAA1QAAANUAAADjAAAA+gAAAP8AAAD/AAAA/wAAAP8AAAC6AAAADQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEUAAADuAAAA/wAAAP8AAAD/AAAA7gAAAHkAAAAmAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAmAAAAeQAAAO4AAAD/AAAA/wAAAP8AAAD6AAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHkAAAD/AAAA/wAAAP8AAAD+AAAAeQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHkAAAD+AAAA/wAAAP8AAAD/AAAAigAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAKYAAAD/AAAA/wAAAP8AAADjAAAAJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACYAAADjAAAA/wAAAP8AAAD/AAAApgAAAAIAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAK8AAAD/AAAA/wAAAP8AAADVAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAK8AAAD/AAAA/wAAAP8AAADaAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAADVAAAA/wAAAP8AAAD/AAAArwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJ4AAAD/AAAA/wAAAP8AAADuAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAADuAAAA/wAAAP8AAAD/AAAAngAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGkAAAD/AAAA/wAAAP8AAAD/AAAArwAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAKYAAAD/AAAA/wAAAP8AAAD/AAAAeQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAADjAAAA/wAAAP8AAAD/AAAA/gAAAMEAAABpAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABpAAAAwQAAAPoAAAD/AAAA/wAAAP8AAADjAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAACKAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/wAAAP8AAAD/AAAA/wAAAP8AAACKAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAugAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAALoAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgAAAK8AAAD6AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD6AAAArwAAACYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAABpAAAAwQAAAO4AAAD6AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD+AAAA/gAAAP4AAAD6AAAA7gAAAMEAAABpAAAADQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAADAAAABMAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABUAAAAWwAAAFsAAABUAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABMAAAAMAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAngAAAJ4AAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAADVAAAA/wAAAP8AAADVAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAANUAAAD/AAAA/wAAAP8AAAD/AAAA1QAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAA1QAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAANUAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAADVAAAA/wAAAP8AAAD/AAAA7gAAAO4AAAD/AAAA/wAAAP8AAADaAAAARQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAANUAAAD/AAAA/wAAAP8AAADjAAAATAAAAEwAAADjAAAA/wAAAP8AAAD/AAAA2gAAAEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAA1QAAAP8AAAD/AAAA/wAAAOMAAABMAAAAAAAAAAAAAABFAAAA4wAAAP8AAAD/AAAA/wAAANoAAABFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAADVAAAA/wAAAP8AAAD/AAAA4wAAAEwAAAAAAAAAAAAAAAAAAAAAAAAARQAAAOMAAAD/AAAA/wAAAP8AAADaAAAARQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgAAANUAAAD/AAAA/wAAAP8AAADjAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEUAAADjAAAA/wAAAP8AAAD/AAAA1QAAACYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVAAAAPoAAAD/AAAA/wAAAOMAAABFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFAAAA4wAAAP8AAAD/AAAA/gAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgAAANUAAAD+AAAA2gAAAEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARQAAANoAAAD+AAAA1QAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAABpAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAABpAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///////wAA/8AAAAP/AAD+AAAAAH8AAPwAAAAAPwAA+AAAAAAfAADwAAAAAA8AAPB////+DwAA8P////8HAADg/////wcAAOD/////BwAA4P////8HAADg/////wcAAOD/////BwAA4P////8HAADg/////wcAAOD/////BwAA4P////8HAADg/////wcAAOD/////BwAA4P////8HAADg/////wcAAOD/////BwAA4P////8HAADg/////wcAAOD/////BwAA4P////8HAADg/////wcAAOD/////BwAA4P////8HAADwf////g8AAPA////8DwAA8AAAAAAPAAD4AAAAAB8AAPwAAAAAPwAA/wAAAAD/AAD///////8AAP///n///wAA///8P///AAD///gf//8AAP//8A///wAA///gB///AAD//8GD//8AAP//g8H//wAA//8H4P//AAD//g/wf/8AAP/+H/h//wAA//4//H//AAD///////8AACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAkAAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAJAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDAAAArAAAAOAAAADtAAAA7QAAAO0AAADtAAAA7QAAAO0AAADtAAAA7QAAAO0AAADtAAAA7QAAAO0AAADtAAAA7QAAAO0AAADtAAAA7QAAAO0AAADgAAAArAAAAEMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXwAAAO0AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA7QAAAF8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAADgAAAA/wAAAP8AAADyAAAA2QAAANkAAADZAAAA2QAAANkAAADZAAAA2QAAANkAAADZAAAA2QAAANkAAADZAAAA2QAAANkAAADZAAAA2QAAANkAAADZAAAA8gAAAP8AAAD/AAAA4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAhwAAAP8AAAD/AAAA2QAAAE8AAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAABPAAAA2QAAAP8AAAD/AAAAhwAAAAAAAAAAAAAAAAAAAAYAAAC9AAAA/wAAAP8AAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAAAA/wAAAP8AAAC9AAAABgAAAAAAAAAAAAAACgAAAMIAAAD/AAAA/AAAAE8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE8AAAD8AAAA/wAAAMIAAAAKAAAAAAAAAAAAAAAKAAAAwgAAAP8AAAD8AAAATwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATwAAAPwAAAD/AAAAwgAAAAoAAAAAAAAAAAAAAAoAAADCAAAA/wAAAPwAAABPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPAAAA/AAAAP8AAADCAAAACgAAAAAAAAAAAAAACgAAAMIAAAD/AAAA/AAAAE8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE8AAAD8AAAA/wAAAMIAAAAKAAAAAAAAAAAAAAAKAAAAwgAAAP8AAAD8AAAATwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATwAAAPwAAAD/AAAAwgAAAAoAAAAAAAAAAAAAAAoAAADCAAAA/wAAAPwAAABPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPAAAA/AAAAP8AAADCAAAACgAAAAAAAAAAAAAACgAAAMIAAAD/AAAA/AAAAE8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE8AAAD8AAAA/wAAAMIAAAAKAAAAAAAAAAAAAAAKAAAAwgAAAP8AAAD8AAAATwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATwAAAPwAAAD/AAAAwgAAAAoAAAAAAAAAAAAAAAoAAADCAAAA/wAAAPwAAABPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPAAAA/AAAAP8AAADCAAAACgAAAAAAAAAAAAAACgAAAMIAAAD/AAAA/AAAAE8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE8AAAD8AAAA/wAAAMIAAAAKAAAAAAAAAAAAAAAKAAAAwgAAAP8AAAD8AAAATwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATwAAAPwAAAD/AAAAwgAAAAoAAAAAAAAAAAAAAAoAAADCAAAA/wAAAPwAAABPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPAAAA/AAAAP8AAADCAAAACgAAAAAAAAAAAAAACgAAAL0AAAD/AAAA/AAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFgAAAD8AAAA/wAAAL0AAAAKAAAAAAAAAAAAAAAAAAAAoQAAAP8AAAD/AAAArAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAArAAAAP8AAAD/AAAAoQAAAAAAAAAAAAAAAAAAAAAAAABYAAAA8gAAAP8AAAD8AAAAvQAAAIoAAACKAAAAigAAAIoAAACKAAAAigAAAIoAAACKAAAAigAAAIoAAACKAAAAigAAAIoAAACKAAAAigAAAIoAAACKAAAAigAAAL0AAAD8AAAA/wAAAPwAAABYAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAChAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAAoQAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAACTAAAA7QAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA7QAAAJMAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAA4AAAAcAAAAIcAAACKAAAAigAAAIoAAACKAAAAigAAAIoAAACHAAAAkwAAAJMAAACHAAAAigAAAIoAAACKAAAAigAAAIoAAACKAAAAhwAAAHAAAAA4AAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAChAAAAoQAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAvQAAAP8AAAD/AAAAvQAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAL0AAAD/AAAA/AAAAPwAAAD/AAAAvQAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAC9AAAA/wAAAPwAAAChAAAAkwAAAPwAAAD/AAAAwgAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAvQAAAP8AAAD8AAAAkwAAAA4AAAAKAAAAkwAAAPwAAAD/AAAAwgAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAL0AAAD/AAAA/AAA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`
      , 'base64'
      )
    )
  )
}

function setMAF() {
  router.get( `/maf.js`, ( req, res ) => res.end( mafsdk ) )
}

function setLicense() {
  const license = fs.readFileSync( path.resolve( process.cwd(), `./node_modules/maf3-sdk/LICENSE` ) )
  router.get( `/LICENSE`, ( req, res ) => res.end( license ) )
}

function setLinter() {
  router.get( `/lint/:identifier`, ( req, res ) => res.end( `Ok` ) )
}

function setApp( meta, maf ) {

  router.get( `/apps/${meta.identifier}/Contents/${meta.scripts}`, async ( req, res ) => {

    await storage.init( { dir: path.resolve( process.cwd(), `./.maf` ) } )

    res.set( `Content-Type`, `application/javascript` )
    res.end( await storage.getItem( `compiledcode` ) )
  } )

  router.use( `/apps/${meta.identifier}`, express.static( process.cwd() ) )
}

function setSrc() {
  router.use( `/src`, express.static( path.resolve( process.cwd(), `./node_modules/maf3-sdk/src/` ) ) )
}

function setApps() {
  router.use( `/apps`, express.static( path.resolve( process.cwd(), `./node_modules/maf3-sdk/apps/` ) ) )
}

module.exports = function( storeConfig, meta, maf ) {
  setIndex( maf, meta, storeConfig )
  setMAF()
  setLicense()
  setLinter()
  setApp( meta, maf )
  setSrc()
  setApps()
  favicon()
  return router
}

